@model Users


@* <form method="post" asp-action="ChangePassword" asp-route-id="@Model.Id" style="width: 30%;margin: 200px auto 0;">
    <div asp-validation-summary="All" class="text-danger"></div>
    <div class="form-group">
        <label class="control-label" >Mật khẩu cũ</label>
        <input type="password" name="oldPassword" class="form-control">
    </div>

    
    <div class="form-group">
        <label  class="control-label" >Mật khẩu mới</label>
        <input type="password" name="newpassword" class="form-control">
    </div>
    <div class="form-group">
        <label  class="control-label" >Xác nhận lại mật khẩu mới</label>
        <input type="password" name="newpasswordConfirm" class="form-control">
    </div>
    <hr>

    <input type="submit" class="btn btn-success" value="Lưu thông tin">
</form>
@section scripts{
        <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
        <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    } *@
   <style>
        html,
        body,
        div,
        span,
        applet,
        object,
        iframe,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        p,
        blockquote,
        pre,
        a,
        abbr,
        acronym,
        address,
        big,
        cite,
        code,
        del,
        dfn,
        em,
        img,
        ins,
        kbd,
        q,
        s,
        samp,
        small,
        strike,
        strong,
        sub,
        sup,
        tt,
        var,
        b,
        u,
        i,
        center,
        dl,
        dt,
        dd,
        ol,
        ul,
        li,
        fieldset,
        form,
        label,
        legend,
        table,
        caption,
        tbody,
        tfoot,
        thead,
        tr,
        th,
        td,
        article,
        aside,
        canvas,
        details,
        embed,
        figure,
        figcaption,
        footer,
        header,
        hgroup,
        menu,
        nav,
        output,
        ruby,
        section,
        summary,
        time,
        mark,
        audio,
        video {
            margin: 0;
            padding: 0;
            border: 0;
            font-size: 100%;
            font: inherit;
            vertical-align: baseline;
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        hgroup,
        menu,
        nav,
        section {
            display: block;
        }

        body {
            line-height: 1;
        }

        ol,
        ul {
            list-style: none;
        }

        blockquote,
        q {
            quotes: none;
        }

        blockquote:before,
        blockquote:after,
        q:before,
        q:after {
            content: '';
            content: none;
        }

        table {
            border-collapse: collapse;
            border-spacing: 0;
        }
    </style>
    <style>
        * {
            box-sizing: border-box;
        }

        :root {
            --color-1: #0c2e60;
            --color-2: linear-gradient(to right, #ef3e0f, #ffb800);
        }

        html {
            font-size: 62.5%;
        }

        body {
            font-size: 1.6rem;
            font-family: "Roboto", sans-serif;
        }

        * {
            box-sizing: border-box;
        }

        .main-content {
            width: 1170px;
            max-width: calc(100% - 48px);
            margin: 0 auto;
            font-size: pop;
        }

        .main-content a {
            text-decoration: none;
        }

        /* chung */
        .profile-block {
            padding-top:150px;
            display: flex;
            justify-content: space-between;
        }

        .profile-block {
            min-height: 100vh;
        }

        .profile-box {
            border: 1px solid #e9ecef;
            border-radius: 4px;
            box-shadow: 0 0 5px 0 rgba(0, 0, 0, .1);
        }

        .profile-sidebar {
            width: 23%;
            margin-right: 2%;
        }

        .profile-title {
            background: linear-gradient(90deg, #3fa121, #21b32d);
            font-size: 1.7rem;
            padding-top: 15px;
            padding-bottom: 15px;
            padding-left: 28px;
            padding-right: 10px;
            color: #fff;
            border-top-left-radius: 4px;
            border-top-right-radius: 4px;
            font-weight: 500;
        }

        .profile-box .navbar-profile li a {
            padding: 13px 25px;
            font-size: 15px;
            color: #000;
            display: block;
            -webkit-transition: all .3s ease-out;
            transition: all .3s ease-out;
        }

        .profile-box .navbar-profile li a:hover {
            background-color: #e9ecef;
        }

        .profile-box .navbar-profile li i {
            margin-right: 12px;
            width: 13px;
            vertical-align: unset;
        }

        .profile-right {
            width: 75%;
        }

        .profile-right .profile-box {
            padding: 20px;
        }

        .profile-right__title {
            font-size: 20px;
            text-transform: uppercase;
            padding-bottom: 8px;
            color: #635f5f;
            font-weight: 700;
            display: inline-block;
        }

        .profile-right__content {
            display: flex;
            margin-top: 20px;
        }

        .btn__profile {
            width: 180px;
            font-size: 14px;
            font-weight: 700;
            border: none;
            background-color: #007bff;
            color: #FFF;
            padding: 10px 8px;
            border-radius: 4px;
        }

        /* chung */

        .change-password-box {
            padding: 0 50px;
        }

        .change-password__form div {
            display: flex;
            align-items: center;
            margin-top: 15px;

        }

        .change-password__form label {
            width: 33%;
            margin-right: 2%;
            font-size: 15px;
            font-weight: 500;
        }

        .change-password__form input {
            font-size: 15px;
            width: 65%;
            padding: 8px 12px;
            border-radius: 4px;
            border: 1px solid #ced4da;
            outline: none;
        }

        .fa-key {
            margin-right: 10px;
        }

        .btn__submit-change-password {
            font-size: 16px;
            margin: 16px 0;
        }

        .submit-change-password {
            display: flex;
            justify-content: end;
        }

        .error-message {
            white-space: normal;
            margin-top: 4px;
            font-weight: 500;
            color: red;
            display: block;
            line-height: 1.2;
            font-size: 15px;
        }
    </style>
 <main>
        <div class="main-content">
            <div class="profile-block">
                <div class="profile-sidebar">
                    <div class="profile-box">
                        <h1 class="profile-title">Account information</h1>
                        <div class="navbar-profile">
                            <ul>
                                <li>
                                    <a asp-action="EditUser" asp-route-usersId="@Model.Id"><i class="fa-solid fa-user"></i>Personal information</a>
                                </li>
                                <li>
                                    <a asp-action="HistoryUploadJob" asp-route-usersId="@Model.Id"><i class="fa-solid fa-file-arrow-up"></i></i>History upload
                                        job</a>
                                </li>
                                <li>
                                    <a asp-action="ChangePassword" asp-route-usersId="@Model.Id"><i class="fa-solid fa-key"></i>Change Password</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="profile-right">
                    <div class="profile-box">
                        <div class="courses-participated">
                            <h2 class="profile-right__title">Change password</h2>
                            <div class="change-password-box">
                                <form asp-action="ChangePassword" asp-route-id="@Model.Id" method="post" id="form_change_password" class="change-password__form">
                                    <div asp-validation-summary="All" class="text-danger"></div>
                                    <div class="old-password">
                                        <label for="Old-password"><i class="fa-solid fa-key"></i>Your old
                                            password</label>
                                        <input type="password" id="Old-password" placeholder="Enter your old password"
                                            name="oldPassword" required>
                                    </div>
                                    <div class="new-password">
                                        <label for="New-password"><i class="fa-solid fa-key"></i>Your new
                                            password</label>
                                        <input type="password" id="New-password" placeholder="Enter your new password"
                                            name="newpassword" required>
                                    </div>
                                    <div style="margin-top: 0; margin-left: 35%;">
                                        <p></p>
                                        <span class="error-message" id="newPasswordError"></span>
                                    </div>
                                    <div class="new-password-again">
                                        <label for="New-password-again"><i class="fa-solid fa-key"></i>New password
                                            again
                                        </label>
                                        <input type="password" id="New-password-again"
                                            placeholder="Enter your new password again" name="newpasswordConfirm" required>
                                    </div>
                                    <div style="margin-top: 0; margin-left: 35%;">
                                        <p></p>
                                        <span class="error-message" id="againPasswordError"></span>
                                    </div>
                                    <div class="submit-change-password">
                                        <button type="submit"
                                            class="btn__profile btn__submit-change-password">Confirm</button>
                                    </div>
                                </form>

                                <script>
                                    $(document).ready(function () {
                                        function validatePassword() {
                                            var isValid = true;

                                            var newPassword = $('#New-password').val().trim();
                                            if (newPassword.length < 8 || newPassword.includes(' ')) {
                                                $('#newPasswordError').text("New password must be at least 8 characters long and cannot contain spaces.");
                                                isValid = false;
                                            } else {
                                                $('#newPasswordError').text("");
                                            }

                                            var againPassword = $('#New-password-again').val().trim();
                                            if (againPassword !== newPassword) {
                                                $('#againPasswordError').text("Passwords do not match.");
                                                isValid = false;
                                            } else {
                                                $('#againPasswordError').text("");
                                            }

                                            return isValid;
                                        }

                                        $('#New-password, #New-password-again').on('input', function () {
                                            validatePassword();
                                        });

                                        $('#form_change_password').submit(function (event) {
                                            if (!validatePassword()) {
                                                event.preventDefault();
                                            }
                                        });
                                    });

                                </script>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

